import React, { useState, useRef } from "react"; import { motion } from "framer-motion"; import { Slider } from "@/components/ui/slider"; // optional shadcn slider if available import { RefreshCw, RotateCcw, Download } from "lucide-react";

// SkyscraperShowcase.jsx // Single-file React component (Tailwind CSS + Framer Motion compatible) // Default export: <SkyscraperShowcase /> // Drop this file into src/components/SkyscraperShowcase.jsx in a React + Tailwind project.

export default function SkyscraperShowcase() { const [floors, setFloors] = useState(23); const [rotation, setRotation] = useState(18); const [slant, setSlant] = useState(0.02); const [material, setMaterial] = useState("glass"); const [scale, setScale] = useState(1); const wrapperRef = useRef(null);

const materials = { glass: { gradient: "from-[#a0e9ff]/60 via-[#8be0ff]/40 to-[#ffffff]/40", gloss: "bg-gradient-to-b", description: "Reflective glass facade with horizontal fins", }, metal: { gradient: "from-[#cfd8dc] via-[#b0bec5] to-[#90a4ae]", gloss: "bg-gradient-to-br", description: "Brushed aluminium panels with vertical ribs", }, terracotta: { gradient: "from-[#f3c4a6] via-[#e79a72] to-[#d86b3a]", gloss: "bg-gradient-to-t", description: "Warm terracotta cladding with recessed windows", }, };

function floorArray(n) { return Array.from({ length: n }).map((_, i) => ({ id: i + 1, height: 10 + (i % 3 === 0 ? 4 : 0), // slight variety })); }

// Visual stack generator for floors const floorsData = floorArray(floors);

return ( <div className="min-h-screen p-6 bg-gradient-to-b from-slate-900 to-slate-800 text-slate-50"> <div className="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-6"> {/* Left: Interactive 3D model */} <div className="bg-slate-900/50 rounded-2xl p-6 shadow-2xl ring-1 ring-slate-700"> <div className="flex items-start justify-between mb-4"> <div> <h2 className="text-2xl font-bold tracking-tight">Ultra-Modern Skyscraper — Preview</h2> <p className="text-sm text-slate-300 mt-1">Floors: {floors} • Material: {material}</p> </div> <div className="flex gap-2"> <button onClick={() => { setRotation((r) => r + 45); }} className="inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-slate-700/40 hover:bg-slate-700/60" title="Rotate view" > <RotateCcw size={16} /> Rotate </button> <button onClick={() => { setFloors(23); setRotation(18); setSlant(0.02); setMaterial('glass'); setScale(1); }} className="inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-slate-700/40 hover:bg-slate-700/60" title="Reset" > <RefreshCw size={16} /> Reset </button> </div> </div>

<div ref={wrapperRef} className="w-full h-[680px] flex items-center justify-center">
        <motion.div
          animate={{ rotateY: rotation }}
          transition={{ type: "spring", stiffness: 40, damping: 20 }}
          style={{ perspective: 1400 }}
          className="relative"
        >
          {/* Ground plaza */}
          <div className="absolute left-1/2 -translate-x-1/2 bottom-0 w-[520px] h-20 rounded-xl bg-slate-700/40 backdrop-blur-md shadow-xl" />

          {/* Skyscraper body (stacked floors) */}
          <div
            className="transform-origin-bottom"
            style={{ transform: `scale(${scale}) skewX(${slant}rad)` }}
          >
            <div className="relative mx-auto" style={{ width: 220 }}>
              {/* crown / spire */}
              <motion.div
                initial={{ translateY: -140 }}
                animate={{ translateY: -10 }}
                transition={{ delay: 0.1 }}\                    className={`mb-2 ${materials[material].gloss} ${materials[material].gradient} rounded-t-xl shadow-[0_30px_60px_rgba(0,0,0,0.6)]`} 
                style={{ height: 32, width: 120, marginLeft: 50 }}
              />

              {/* floor stack */}
              <div className="flex flex-col-reverse">
                {floorsData.map((f, idx) => {
                  const hueShift = (idx % 6) * 2;
                  const depth = Math.max(1, Math.floor((idx / floors) * 14));
                  const translateX = (idx % 4) - 2; // slight offset for uniqueness
                  return (
                    <motion.div
                      key={f.id}
                      layout
                      initial={{ opacity: 0, translateY: 40 }}
                      animate={{ opacity: 1, translateY: 0 }}
                      transition={{ delay: idx * 0.01 }}
                      className={`relative rounded-md overflow-hidden border border-slate-700/30 shadow-[0_10px_30px_rgba(2,6,23,0.7)]`} 
                      style={{
                        height: f.height,
                        marginTop: 2,
                        marginBottom: 2,
                        transform: `translateX(${translateX}px) translateZ(${depth}px)`,
                        background: `linear-gradient(180deg, rgba(255,255,255,${0.02 + (idx % 5) * 0.015}), rgba(0,0,0,0.04))`,
                      }}
                    >
                      {/* facade */}
                      <div className={`w-full h-full ${materials[material].gloss} ${materials[material].gradient}`}></div>

                      {/* Balconies / fins */}
                      <div className="absolute inset-0 pointer-events-none">
                        <svg className="w-full h-full" preserveAspectRatio="none">
                          <defs>
                            <linearGradient id={`g${idx}`} x1="0" x2="0" y1="0" y2="1">
                              <stop offset="0%" stopColor="rgba(255,255,255,0.06)" />
                              <stop offset="100%" stopColor="rgba(0,0,0,0.05)" />
                            </linearGradient>
                          </defs>
                          <rect x="0" y="0" width="100%" height="100%" fill={`url(#g${idx})`} />
                        </svg>
                      </div>

                      {/* windows rhythm */}
                      <div className="absolute inset-0 grid grid-cols-4 gap-1 p-2 opacity-80">
                        {Array.from({ length: 4 }).map((_, wi) => (
                          <div key={wi} className="rounded-sm bg-black/10 h-full w-full backdrop-blur-[1px] bg-clip-padding" />
                        ))}
                      </div>
                    </motion.div>
                  );
                })}
              </div>

              {/* podium */}
              <div className={`mt-4 rounded-b-2xl ${materials[material].gloss} ${materials[material].gradient} shadow-lg`} style={{ height: 40 }} />
            </div>
          </div>

          {/* side annotation panel (floating) */}
          <div className="absolute right-[-260px] top-8 w-60 bg-slate-800/60 p-4 rounded-2xl ring-1 ring-slate-700">
            <h3 className="text-sm font-semibold">Design details</h3>
            <p className="text-xs text-slate-300 mt-2">{materials[material].description}</p>
            <ul className="mt-3 text-xs text-slate-300 space-y-1">
              <li>• Height (approx.) — {Math.round(floors * 3.4)} m</li>
              <li>• Floor count — {floors}</li>
              <li>• Curved glass fins</li>
            </ul>
          </div>
        </motion.div>
      </div>

      {/* Controls */}
      <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="col-span-1">
          <label className="text-xs text-slate-300">Floors</label>
          <input
            type="range"
            min={3}
            max={60}
            value={floors}
            onChange={(e) => setFloors(Number(e.target.value))}
            className="w-full mt-2"
          />
        </div>

        <div>
          <label className="text-xs text-slate-300">Rotation</label>
          <input
            type="range"
            min={-180}
            max={180}
            value={rotation}
            onChange={(e) => setRotation(Number(e.target.value))}
            className="w-full mt-2"
          />
        </div>

        <div>
          <label className="text-xs text-slate-300">Slant / Skew</label>
          <input
            type="range"
            min={-0.08}
            max={0.08}
            step={0.002}
            value={slant}
            onChange={(e) => setSlant(Number(e.target.value))}
            className="w-full mt-2"
          />
        </div>
      </div>

      <div className="mt-4 flex items-center gap-4">
        <label className="text-xs text-slate-300">Material</label>
        <div className="inline-flex gap-2">
          {Object.keys(materials).map((m) => (
            <button
              key={m}
              onClick={() => setMaterial(m)}
              className={`px-3 py-1 rounded-xl text-xs ${m === material ? 'bg-slate-700/60' : 'bg-slate-700/30'} `}
            >
              {m}
            </button>
          ))}
        </div>

        <label className="ml-6 text-xs text-slate-300">Scale</label>
        <input type="range" min={0.6} max={1.6} step={0.01} value={scale} onChange={(e) => setScale(Number(e.target.value))} className="w-36" />

        <div className="ml-auto inline-flex items-center gap-2">
          <button className="px-3 py-2 rounded-lg bg-emerald-600/80 shadow" title="Export SVG (not implemented)">
            <Download size={16} /> Export
          </button>
        </div>
      </div>
    </div>

    {/* Right: Specs, notes, and GitHub instructions */}
    <div className="bg-slate-900/40 rounded-2xl p-6 shadow-xl ring-1 ring-slate-700 flex flex-col gap-4">
      <h3 className="text-xl font-bold">Design brief & GitHub setup</h3>
      <p className="text-sm text-slate-300">This interactive single-file component demonstrates a concept: a 23-floor ultra-modern skyscraper with an adjustable facade, rotation, and simple material presets. Use it as a prototype for visualising massing and façade ideas before exporting to Figma/CAD or handing to BIM teams.</p>

      <div className="mt-2 bg-slate-800/30 p-3 rounded">
        <h4 className="text-sm font-semibold">Things you can extend</h4>
        <ul className="text-xs text-slate-300 mt-2 space-y-1">
          <li>• Replace stacked DOM elements with real SVG vectors for exportable drawings.</li>
          <li>• Integrate with three.js for a full 3D model that exports GLTF.</li>
          <li>• Connect controls to parametric rules (setbacks, floor plate changes).</li>
          <li>• Add CAD/BIM export via IFC exporters on backend.</li>
        </ul>
      </div>

      <div className="mt-2 bg-slate-800/30 p-3 rounded">
        <h4 className="text-sm font-semibold">Quick GitHub + project setup</h4>
        <ol className="text-xs text-slate-300 mt-2 list-decimal list-inside space-y-1">
          <li>Create a new repo on GitHub and clone it locally.</li>
          <li>Run <code className="bg-slate-900/50 px-1 rounded">npm create vite@latest</code> and pick React + JavaScript (or TypeScript).</li>
          <li>Install dependencies: <code className="bg-slate-900/50 px-1 rounded">npm i framer-motion lucide-react</code> and Tailwind per their docs.</li>
          <li>Place this file in <code className="bg-slate-900/50 px-1 rounded">src/components/SkyscraperShowcase.jsx</code> then import into <code className="bg-slate-900/50 px-1 rounded">src/App.jsx</code>.</li>
          <li>Commit and push; use GitHub Pages, Vercel, or Netlify to preview live.</li>
        </ol>
      </div>

      <div className="mt-3 bg-slate-800/20 p-3 rounded text-xs text-slate-300">
        <strong>Deliverable tip:</strong> For a client-ready package prepare:
        <ul className="list-disc pl-4 mt-2">
          <li>High-res renders (3–4 views), floor count schedule, facade material board, and schematic elevations.</li>
          <li>Optional: export to three.js / Blender for photoreal renders and BIM handover (Revit/IFC).</li>
        </ul>
      </div>

      <div className="mt-auto text-xs text-slate-400">Feel free to tell me which parts you want turned into a downloadable SVG, a full three.js GLTF exporter, or a parametric script for Rhino/Grasshopper — I'll generate the code for that next.</div>
    </div>
  </div>
</div>

); }

